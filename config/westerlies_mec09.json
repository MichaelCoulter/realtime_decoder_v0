{
    "datasource": "trodes",


    "rank": {
        "supervisor": 0,
        "decoder": [1],
        "ripples": [2,3,4,5,6,7,8,9,10,11],
        "gui": 12,
        "encoders": [13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69]
    },

    "rank_settings": {
        "enable_rec": [0,1,2,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69],
        "enable_profiler": []
    },

    "tetrode_split": {
        "1st_half": [1,2,3,4,6,7,8,9,10,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,41,42,43,44,45,46,48,50,51,52,53,54,55,56,57,58,59,61,64],
        "2nd_half": []
    },

    "files": {
        "output_dir": "/media/lorenlab/84fc44d3-77e1-4289-a1bc-dc9525326ee9/spykshrk_output",
        "prefix": "fred_05282021_play_0809_1",
        "rec_postfix": "bin_rec",
        "profile_postfix": "pstats",
        "timing_postfix": "timing",
        "backup_dir": "/media/lorenlab/84fc44d3-77e1-4289-a1bc-dc9525326ee9/spykshrk_output"
    },

    "trodes": {
        "voltage_scaling_factor": 0.195,
        "config_file": "/home/lorenlab/Trodes_Configs/64tetrodeDrive_03_2021.trodesconf"
    },
 
    "ripple_conditioning": {
        "session_type": "run",
        "instructive": 0,
        "posterior_sum_threshold": 0.4,
        "second_post_sum_thresh": 0.4,
        "other_arm_threshold": 0.2,
        "posterior_sum_rip_only": false,
        "post_sum_sliding_window": 5,
        "ripple_detect_velocity": 10,
        "spike_count_window_sec": 300,
        "previous_spike_count_avg": 1.312,
        "previous_spike_count_std": 0.931,
        "number_of_decoders": 1,
        "replay_target_arm": 1,
        "replay_non_target_arm": [2],
        "replay_target": [20,24],
        "replay_offtarget": [36,40],
        "target_arm_position": [0,40],
        "condition_rip_thresh": 100,
        "shortcut_msg_lockout": 60000,
        "shortcut_msg_on" : true,
        "center_well_position": [638,653],
        "max_center_well_dist": 17,
        "enc_cred_int_max": 5,
        "min_unique_tets": 2,
        "ripple_lockout": 3000,
        "load_encoding": false
    },

    "reward_mode" : "replay",

    "camera" :{
        "frame_rate": 30
    },

    "head_direction": {
        "min_duration": 2,
        "well_angle_range": 3,
        "within_angle_range": 25,
        "max_center_well_dist": 17,
        "well_pos": [[928.895, 255.175], [301.263, 277.608]],
        "lockout_time": 10
    },
    
    "ripple": {
        "RippleParameterMessage": {
            "rip_coeff1": 1.2,
            "rip_coeff2": 0.2,
            "ripple_threshold": 4,
            "baseline_window_timestamp": 450000,
            "n_above_thresh": 4,
            "lockout_time": 3000,
            "posterior_lockout_time": 0,
            "ripple_conditioning_lockout_time": 0,
            "detect_no_ripples": false,
            "detect_no_ripple_time": 0,
            "dio_gate": false,
            "dio_gate_port": -1,
            "enabled": true,
            "use_custom_baseline": true,
            "update_custom_baseline": false
        },
        "CustomRippleBaselineMeanMessage": {
            " 1 ": 13.64 , 
            " 6 ": 13.45 , 
            " 9 ": 12.36 , 
            " 4 ": 12.86 , 
            " 11 ": 12.37 , 
            " 33 ": 13.08 ,
            " 38 ": 19.86 , 
            " 44 ": 23.04 ,
            " 36 ": 19.12 , 
            " 51 ": 14.06 , 
            " 7 ": 14.66 ,
            " 39 ": 12.75 , 
            " 2 ": 13.06 ,
            " 10 ": 12.24 , 
            " 3 ": 13.04 , 
            " 8 ": 11.96 , 
            " 34 ": 13.85 , 
            " 45 ": 23.1 , 
            " 35 ": 12.25 , 
            " 43 ": 13.52 
             
        },
        "CustomRippleBaselineStdMessage": {
            " 1 ": 8.64 ,
            " 6 ": 8.43 ,
            " 9 ": 7.76 ,
            " 4 ": 8.11 ,
            " 11 ": 7.77 ,
            " 33 ": 8.21 ,
            " 38 ": 12.39 ,
            " 44 ":14.69 ,
            " 36 ": 11.96 ,
            " 51 ": 8.83 ,
            " 7 ": 9.46 ,
            " 39 ": 8.04 ,
            " 2 ": 7.66 ,
            " 10 ": 8.23 ,
            " 3 ": 8.26 ,
            " 8 ": 7.52 ,
            " 34 ": 8.71 ,
            " 45 ": 14.74 ,
            " 35 ": 7.7 ,
            " 43 ": 8.41 

        }
    }, 

    "encoder": {
        "sampling_rate": 30000,
        "mark_kernel": {
            "mean": 0,
            "std": 20,
            "lower": -1024,
            "upper": 1024,
            "interval": 1,
            "enable_filter": 1,
            "n_std": 1,
            "n_marks_min": 10
        },
        "RStar_edge_length_factor": 6,

        "position": {
            "lower": 0,
            "upper": 41,
            "bins": 41,
            "arm_pos": [[0, 40]]
        },
        "position_kernel": {
            "std": 5
        },
        "vel": 10,
        "spk_amp": 175,
        "noise_max_amp": 1500,
        "dead_channels": {

        },
        "occupancy": [[0]],
        "arm_coords": [[0,8],[13,24],[29,40]],
        "arm_ids": [0,0, 1, 2],
        "cmperpx": 0.222

    },

    "decoder": "pp_decoder",

    "bayesian_decoder": {
        "bin_size": 30000
    },

    "clusterless_estimator": "pp_decoder",
    "pp_decoder": {
        "number_arms": 2,
        "bin_size": 180,
        "trans_mat_uniform_gain": 1,
        "trans_mat_smoother_std": 3,
        "circle_buffer": 1000,
        "bin_delay": 5,
        "state_labels": ["state"]
    },

    "pp_classifier": {
        "state_labels": ["stationary", "continuous", "fragmented"],
        "discrete_transition": {
            "type": ["strong_diagonal"],
            "diagonal": 0.98
        },
        "continuous_transition": {
            "type": [["identity", "random_walk", "uniform"],
                     ["identity", "random_walk", "uniform"],
                     ["uniform", "uniform", "uniform"]],
            "cm_per_bin": 2.5,
            "gaussian_std": 6
        }
    },

    "trodes_network": {
        "decoding_tetrodes": [1,2,3,4,6,7,8,9,10,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,41,42,43,44,45,46,48,50,51,52,53,54,55,56,57,58,59,61,64],
        "ripple_tetrodes": [1,2,3,4,6,7,8,9,10,11,33,34,35,36,38,39,43,44,45,51]
    }
}